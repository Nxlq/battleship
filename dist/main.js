(()=>{"use strict";var e={d:(t,o)=>{for(var r in o)e.o(o,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:o[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{C:()=>f});const t=e=>{let t=0;return{length:e,isSunk:!1,hit:function(){return t+=1,t},getHitCount:function(){return console.log(t),t},checkIfSunk:function(){return e-t<=0}}},o=()=>{let e=!1;const o=[],r=[];function n(){e=!0!==e}const i={carrier:t(5),battleship:t(4),cruiser:t(3),submarine:t(3),destroyer:t(2)};let l=0;function s(){return l}const c=new Map([]);for(let e=0;e<10;e+=1)for(let t=0;t<10;t+=1)c.set([e,t].toString(),"water");const a=()=>0!==Object.values(i).filter((e=>!e.checkIfSunk())).length;return{getBoard:()=>(console.log(c),c),setShip:(e,t,o="h")=>{if(!function(e,t,o){const r=i[t].length,n="h"===o?[e[0],e[1]+r]:[e[0]+r,e[1]];return n[0]>=0&&n[0]<=9&&n[1]>=0&&n[1]<=9}(e,t,o))return console.error("invalid placement position");const r=i[t].length;for(let n=0;n<r;n+=1){const r="h"===o?[e[0],e[1]+n]:[e[0]+n,e[1]];if(console.log({coord:e,coordsToSet:r}),"water"!==c.get(r.toString()))return console.error("Invalid Coords");c.set(r.toString(),t),l+=1,console.log(s())}return s()},logShips:()=>{console.log(i)},receiveAttack:t=>{if(!e)return console.log("board can not be currently attacked"),!1;const l=t.toString();return!o.includes(l)&&(!r.includes(l)&&("water"!==c.get(l)?(i[c.get(l)].hit(),o.push(l),a()?(n(),c.get(l)):"game over"):(r.push(t.toString()),n(),c.get(l))))},getShipHitcount:function(e){return i[e].getHitCount()},missedAttacks:r,hasShipsAlive:a,toggleBoardState:n,isBoardActive:function(){return console.log(e),e},getShipsPlacedCount:s}},r=document.getElementById("btn-start-game"),n=document.querySelectorAll(".game-board"),i=document.querySelectorAll('[draggable="true"]'),l=document.querySelector(".game-board.one"),s=(document.querySelector(".game-board.two"),document.querySelector(".game-container.one")),c=document.querySelector(".game-container.two"),a=(document.querySelector("body"),{piecesToTheRight:null,shipLength:null,piecesToTheLeft:null,shipDirection:"h",shipType:null,curCoord:null,shipHeadCoord:null});function d(e){console.log("start",e),[a.shipType]=e.target.classList,setTimeout((()=>{this.classList.add("invisible")}),0)}function g(e){}function u(e){e.preventDefault(),console.log("over"),e.target.classList.add("hovered");let t=e.target.nextElementSibling;for(let e=0;e<a.piecesToTheRight;e+=1)t.classList.add("hovered"),t=t.nextElementSibling;const o=a.shipLength-(a.piecesToTheRight+1);let r=e.target.previousElementSibling;for(let e=0;e<o;e+=1)r.classList.add("hovered"),r=r.previousElementSibling}function h(e){e.preventDefault(),console.log("enter"),console.log("TARGET",e.target),console.log(e.target.nextElementSibling)}function p(e){console.log("leave"),console.log("TARGET",e.target),e.target.classList.remove("hovered");let t=e.target.nextElementSibling;for(let e=0;e<a.piecesToTheRight;e+=1)t.classList.remove("hovered"),t=t.nextElementSibling;const o=a.shipLength-(a.piecesToTheRight+1);let r=e.target.previousElementSibling;for(let e=0;e<o;e+=1)r.classList.remove("hovered"),r=r.previousElementSibling}function b(e){var t;console.log("drop"),this.classList.remove("hovered"),this.classList.add("fill"),a.curCoord=this.getAttribute("coords").split(",").map((e=>+e)),a.shipHeadCoord="h"===a.shipDirection?[a.curCoord[0],a.curCoord[1]-a.piecesToTheLeft]:[a.curCoord[0]-a.piecesToTheLeft,a.curCoord[1]],console.log(a.shipHeadCoord),console.log(e.target),console.log(a),f.gameboard.setShip(a.shipHeadCoord,a.shipType,a.shipDirection),t=f.gameboard.getBoard(),[...l.children].forEach((e=>{const o=t.get(e.attributes.coords.value);"water"===o&&(e.style.backgroundColor="#34b1eb"),"water"!==o&&function(e){e.style.backgroundColor="#9c0000"}(e)}))}i.forEach((e=>{console.log(e),e.addEventListener("dragstart",d),e.addEventListener("dragend",g),e.addEventListener("mousedown",(e=>{console.log(e),function(e){const t=e.parentElement.getAttribute("data-length");let o=0,r=e;for(;r.nextElementSibling;)console.log(r.nextElementSibling),r=r.nextElementSibling,o+=1;a.piecesToTheRight=o,a.shipLength=t,a.piecesToTheLeft=a.shipLength-(a.piecesToTheRight+1)}(e.target)}))}));const f={gameboard:o()},m=(()=>{const e=o();function t(e,t){return Math.floor(Math.random()*(t-e+1)+1)}return{gameboard:e,getValidCoords:function(){let o=[t(0,9),t(0,9)];for(;e.missedAttacks.includes(o.toString());)o=[t(0,9),t(0,9)];return o}}})();function v(){return f.gameboard.isBoardActive()?(s.style.backgroundColor="#9c0000",void(c.style.backgroundColor="black")):m.gameboard.isBoardActive()?(c.style.backgroundColor="#9c0000",void(s.style.backgroundColor="black")):"error neither board is active?"}window.addEventListener("DOMContentLoaded",(()=>{n.forEach((e=>{const t=[...e.children];let o=0,r=0;t.forEach((e=>{r>9&&(r=0,o+=1),e.setAttribute("coords",`${o},${r}`),r+=1}))})),console.log(l.childNodes),l.childNodes.forEach((e=>{e.addEventListener("dragover",u),e.addEventListener("dragenter",h),e.addEventListener("dragleave",p),e.addEventListener("drop",b)}))})),r.addEventListener("click",(()=>{f.gameboard.getBoard(),m.gameboard.getBoard()})),n.forEach((e=>{e.addEventListener("click",v)}))})();
//# sourceMappingURL=main.js.map